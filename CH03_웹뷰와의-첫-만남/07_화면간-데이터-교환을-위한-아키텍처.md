## 화면간 데이터 교환을 위한 아키텍처

사소해 보이지만, 미래를 위해 굉장히 중요한 스펙... :)

```
1. 데이터 교환의 주체
2. 데이터 저장 기술 선택
3. 데이터 저장 인터페이스
```

라우팅을 딥링크를 이용해서 네이티브 앱에서 하는 상태에서의 웹뷰 간 데이터의 교환.<br />

두 개의 화면이 두 가지의 애플리케이션으로 만들어져야 되고, 번들링 돼서 따로따로 실행이 되게끔 만드는 구조로 만들었다라고 하면, <br />
"두 개 간에 URI를 통한 데이터 교환을 제외하고 다른 종류의 데이터를 만약에 공유해야 한다라고 하면 어떤 것을 써야할까?"<br />
프론트엔드 개발자라면, 로컬 스토리지나 세션 스토리지 혹은 쿠키와 같은 것들을 먼저 떠올릴 수 있을 것이고, 저장해야 될 데이터, 공유해야 될 데이터가 더 크다라고 하면 인덱스DB나 요즘 잘 안쓰긴 하지만 웹SQL 같은 것들도 고려해 볼 수 있을 것이다. 하지만 도메인에 대한 제약이 있다. 그 두 개간의 웹앱이 같은 도메인을 써야 한다라는 것이다.<br />
근데 만약에 서버가 달라서 또 웹 애플리케이션이 더더욱 많아져서 도메인이 다 제각각이면 어떻게 해야할까? 웹에서 데이터를 저장하는 용도의 스펙을 하나도 쓸 수가 없게 된다. 결국 딥링크 안에다가 데이터를 어떻게 해서든지 계속 우겨 넣어서 교환을 해야 하는데, 그건 충분히 한계가 있을 수밖에 없는 구조이고, 그런 측면에서 데이터. 즉, 화면과 화면 간의 데이터를 교환하기 위한 아키텍처로는 앱이 즉, 네이티브 쪽에서 제공을 해줘야 한다라는 이야기를 하고 싶다.<br />

이런 이야기를 하는 이유는 프론트엔드 개발자 입장에서 화면 간 데이터를 교환을 해야 되는 상황. 예를 들면, 카트 정보라던가 상품 정보라던가 혹은 주문정보에서 주문 요청사항 같은 것들이 만약에 있다고 하면, 주문 요청사항이 있는데 다른 상품을 주문할 때 주문 지면이 두 개 였는데 이 주문 지면이 모두 다 웹뷰로 만들어져 있고 한쪽 웹뷰에서 사용자가 주문 요청을 적었던 걸 다른 웹뷰에 들어갔더니 없는 경우. 그러면 같은 서비스내에서 똑같은 주문 지면으로 보는 사용자 입장에서 이상할 것이다.<br />
이와 같을 때, 이런 종류의 요청사항을 어디다가 저장해야 될 것이냐고 할 때, 쿠키나 로컬스토리지나 이런거로는 안 된다는 이야기다. 그럼 결국 네이티브 쪽에서 저장을 해야 하고, 네이티브쪽에서 저장을 하려면 당연히 자바스크립트를 이용해서 네이티브 쪽과 데이터를 보내는 스펙이 필요하고 그건 네이티브 쪽에서 제공을 해줘야 되는 스펙이라는 이야기다.<br />

그래서 웹뷰 간 데이터 교환을 위해서 네이티브에서 제공되는 자바스크립트 인터페이스가 필요하고 그런 것들은 필요할 때마다 만드는 게 아니라 한 번 만들어지면 웹앱 내에서 계속 쓰여져야 하고, 호환성이 계속 유지되어야 하는 거기 때문에 초기부터 프론트엔드 개발자가 그것을 요청하고, 요청에 의해서 그런 인터페이스가 만들어지고 모든 서비스 내에서 웹뷰가 그런 종류의 데이터를 공유하기 위해서 그 스펙을 사용하는 게 좋겠다. (!)<br />

내용은 굉장히 간단한 내용이지만, 이게 없이 초기에 같은 도메인에서 웹서비스를 작게 시작했다고 해서 그런 류의 데이터 교환은 쿠키나 로컬 스토리지 같은 것들로 쓰게 될 때, 나중에 점점 규모가 커지면서 사용자 입장에서는 뭔가 이상한 상황들이 왕왕(!) 발생한다는 이야기다. 아까 이야기한 주문 내역 같은 것들도 그렇고... 이런 것들이 없으려면 즉 심리스한 사용자 경험을 서비스가 굉장히 거대해진다 하더라도 어떤 지면에 들어가서든 제공해 주기 위해서 그런 세심한 노력이 필요하고, 이것도 마찬가지로 프론트엔드 개발자가 요청하지 않으면, 앱 개발자가 그냥 스스로 알아서 만들어주는 스펙이 아니기 때문에 이걸 충분히 인지하고 초기부터 이런 것들을 요청해서 스펙화해야 한다. 그리고 만들어서 구현해야 한다는 이야기... :)
