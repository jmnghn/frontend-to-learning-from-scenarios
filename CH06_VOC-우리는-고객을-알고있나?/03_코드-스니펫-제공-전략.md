## 코드 스니펫 제공 전략

데이터, 로그 수집 서버가 개발이 됐을 때,<br />
당연히 그 서버한테 요청을 보내서 로그를 수집하기 위한 클라이언트가 필요하다.<br />
우리가 만들어놓은 쇼케이스 지면 같은 경우에 그 대상이 되는 클라이언트 웹앱이 될 것이다.<br />
그 앱에서 로그를 어떻게 보낼 것인가라고 했을 때, 정상적인 경우라고 한다면 로그를 전송할 수 있게끔 디자인된 전용 라이브러리가 만들어지고 그것들이 배포되서 '이 라이브러리를 사용해주세요'라고 하는 경우가 가장 이상적인 경우일텐데, 그렇지 않은 경우가 종종 있어서 그 이야기를 해보는 시간.

```
1. 코드 스니펫
2. 웹프론트 개발자의 기대 행동
```

### 코드 스니펫 제공

snippet(샘플 코드)을 필요한 클라이언트 개발팀한테 보내 주고, '이 서버에 이런 스펙으로 이렇게 전송하면 로그가 쌓일 겁니다'라고 제공을 해준다. 그러면 당연히 개발팀이 여러 팀이 있을 테니까 네이티브 팀은 네이티브 팀대로 웹 팀은 웹 팀 나름대로 그 스펙에 맞춰서, (결국은 HTTP 프로토콜 스펙에 맞춘 그 스펙일 것이다.) 12shop같은 경우에는 바로 이게 코드 스니펫이 될 것이다.<br />

`/backend/app-log-server/rest.http`파일 자체가 코드 스니펫이 될 것이다.<br />

```js
// /backend/app-log-server/rest.http

GET http://localhost:1205/api/logs HTTP/1.1

POST http://localhost:1205/api/logs HTTP/1.1
content-type: application/json

{
  "service": "12shop",
  "application": "showcase",
  "screen": "home",
  "event": "enter",
  "user": "ibare",
  "extraData": "",
  "clientTimestamp": {{$timestamp}}
}
```

이 서버를 제공하는 팀 입장에서는 이 클라이언트가 네이티브 안드로이드인지, iOS인지 웹인지 모르니까. 모른다기 보다는 정확히는 셋 다 일테니까 각각에 대해서 샘플 코드를 보여주는 게 아니라, HTTP의 rest.API의 규격을 그냥 알려주는 것이다. API DOC 문서까지 있으면 금상첨화겠지만, 그것조차 없이 이렇게 되는 경우들이 굉장히 많다.😭<br />
급하게 만들어지는 경우들도 많고, 앞단에 로직이 이쁘게 만들어지는 경우가 그렇게 많지는 않은 것 같다.<br />

그런데 중요한 건 이렇게 샘플로 전달된 것들을 프론트엔드 개발자 입장에서는 어떻게 다룰 것이냐라고 하는 것이다. 보통 네이티브 개발자와 웹 프론트엔드 개발자가 다른 상황이라고 생각이 드는 건 뭐냐면 네이티브 개발의 코드는 단일 리파지토리에서 개발을 하게 되어 있다. 그러니까 12shop 앱의 코드는 하나의 앱 클라이언트 리파지토리(같은 코드베이스)에 저장되고 거기서 개발이 될 것이다. 그런데 웹 같은 경우에는 여러 가지 웹앱이 분산돼서 개발되는 경우들이 비일비재하고 또 그래야만 하는 경우들이 굉장히 많다. 지금까지 진행된 웹 클라이언트만 하더라도 `web0`, `web1`, `webview1` 이렇게 여러 가지가 있었고 앞으로는 더 많이 생길 텐데, 이렇게 많은 그리고 분리된 리파지토리 환경 하에서 이렇게 스니펫만 제공이 될 경우에는 당연히 팀이 다르면 각각의 팀이 알아서 개발을 하게 된다.<br />

프로토콜은 하나이나 이걸 사용하는 방법은 미묘하게 다 다른 상황이 생길테고, 만약에 스펙이 추가된다거나 혹은 형태가 달라진다거나라고 했을 경우에는 네이티브 리파지토리는 자연스럽게 원래 하나의 코드 베이스에 있는거니까 그것만 고쳐지면 될 것이고 그래서 적용이 상대적으로 쉬운데, 웹 같은 경우에는 프로젝트마다 중복된 코드가 있기 때문에 그걸 또 다 고쳐져야 되고 또 그걸 또 그만큼 커뮤니케이션해야 되고, 그 많은 프로젝트들이 동시에 같이 배포되어야 하는 문제들이 있다. 이런 현상들은 사실 없을 것 같지만 굉장히 비일비재 일어난다.

<br />

### 웹프론트 개발자의 기대 행동

이런 상황이 생겼을 때 적극적으로 '내가 웹쪽에 SDK를 만들어서 배포를 하겠습니다.', '공통된 규약으로 만들어서 웹 애플리케이션 여러 팀들한테 배포를 하도록 하겠습니다.' 라고 먼저 나서서 개발을 진행하면 나도 좋고, 회사에도 좋고, 조직도 좋고...:)<br />
이렇게 '긍정적인 방식으로 활동하고 일을 해라'라고 하는 당부...:)<br />
코드 스니펫이 오는 스펙이 오더라도 '라이브러리화해서 내가 배포해야겠구나'와 같은 생각을 가져 주시라는 이야기 :)
